(function(){var e={6850:function(e,t,o){"use strict";var l=o(144),a=o(998),i=o(3059),n=function(){var e=this,t=e._self._c;return t(a.Z,[t("TopNav"),t("LeftNav"),t("Rightbar"),t(i.Z,[t("MainSheet")],1)],1)},s=[],r=o(6843),c=o(3423),u=o(4562),h=o(2118),d=o(4324),p=o(9592),f=o(3687),m=function(){var e=this,t=e._self._c;return t(r.Z,{attrs:{app:"",elevation:"2",color:"blue-grey darken-4"}},[t(h.Z,{staticClass:"py-0 fill-height"},[t(c.Z,{staticClass:"mr-10",attrs:{color:"grey darken-3",size:"32"}},[e._v("L")]),t(u.Z,{attrs:{text:""},on:{click:function(t){e.showCreateDialog=!0}}},[e._v(" Создать расчёт ")]),t(f.Z),t(u.Z,{attrs:{width:"400",text:""}},[t(p.Z,{attrs:{value:"40"}})],1),e.bucketName?t(u.Z,{attrs:{icon:""},on:{click:function(t){e.showUploadDialog=!0}}},[t(d.Z,[e._v("mdi-cloud-upload")])],1):e._e(),e.bucketName?t(u.Z,{staticClass:"outlined x-small elevation-0",attrs:{text:""},on:{click:e.RemoveBucket}},[e._v(" "+e._s(e.bucketName)+" "),t(d.Z,{staticClass:"mx-2",attrs:{color:"red darken-4"}},[e._v("mdi-delete-forever")])],1):e._e(),t("CreateBucket",{attrs:{showCreateDialog:e.showCreateDialog},on:{CloseCreateDialog:function(t){e.showCreateDialog=!1}}}),t("UploadFile",{attrs:{bucketName:e.bucketName,showUploadDialog:e.showUploadDialog},on:{CloseUploadDialog:function(t){e.showUploadDialog=!1}}})],1)],1)},k=[],b=o(9582),g=o(4886),v=o(266),Z=o(5879),C=o(1713),_=o(1023),N=o(1357),w=function(){var e=this,t=e._self._c;return t(Z.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:e.showCreateDialog,callback:function(t){e.showCreateDialog=t},expression:"showCreateDialog"}},[t(b.Z,[t(g.EB,[t("span",{staticClass:"text-h5"},[e._v("Создать расчёт")])]),t(g.ZB,[t(h.Z,[t(C.Z,[t(v.Z,{attrs:{cols:"12"}},[t(N.Z,{attrs:{label:"Название расчёта"},model:{value:e.bucket.name,callback:function(t){e.$set(e.bucket,"name",t)},expression:"bucket.name"}})],1),t(v.Z,{attrs:{cols:"12"}},[t(N.Z,{attrs:{label:"Bucket region (пока бд не прикрутил - путь так)"},model:{value:e.bucket.region,callback:function(t){e.$set(e.bucket,"region",t)},expression:"bucket.region"}})],1),t(_.Z,{attrs:{label:`Object locking: ${e.bucket.objectLocking.toString()}`},model:{value:e.bucket.objectLocking,callback:function(t){e.$set(e.bucket,"objectLocking",t)},expression:"bucket.objectLocking"}})],1)],1)],1),t(g.h7,[t(f.Z),t(u.Z,{attrs:{color:"blue darken-1",text:""},on:{click:function(t){return e.$emit("CloseCreateDialog")}}},[e._v(" Close ")]),t(u.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.CreateBucket}},[e._v(" Create ")])],1)],1)],1)},x=[],F={name:"CreateBucket",props:["showCreateDialog"],data:()=>({bucket:{name:"",region:"",objectLocking:!1}}),methods:{CreateBucket(){this.$http.post("http://localhost:8080/api/bucket/create",{bucketName:this.bucket.name,bucketRegion:this.bucket.region,objectLocking:this.bucket.objectLocking}).then((()=>{this.$root.$emit("UpdateBucketList")}),(e=>{console.log("err:",e)})),this.bucket={name:"",region:"",objectLocking:!1},this.$emit("CloseCreateDialog")}}},L=F,$=o(1001),D=(0,$.Z)(L,w,x,!1,null,null,null),y=D.exports,U=o(1234),B=function(){var e=this,t=e._self._c;return t(Z.Z,{attrs:{persistent:"","max-width":"600px"},model:{value:e.showUploadDialog,callback:function(t){e.showUploadDialog=t},expression:"showUploadDialog"}},[t(b.Z,[t(g.EB,[t("span",{staticClass:"text-h5"},[e._v("Upload file")])]),t(g.ZB,[t(h.Z,[t(C.Z,[t(v.Z,{attrs:{cols:"12"}},[t(U.Z,{ref:"file",attrs:{multiple:"",label:"Выберите файл для загрузки",type:"file",id:"file",value:"file"},on:{change:e.HandleFileChanged},model:{value:e.uploadFiles,callback:function(t){e.uploadFiles=t},expression:"uploadFiles"}})],1)],1)],1)],1),t(g.h7,[t(f.Z),t(u.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.CloseUploadFileDialog}},[e._v(" Close ")]),t(u.Z,{attrs:{color:"blue darken-1",text:""},on:{click:e.HandleFileUpload}},[e._v(" Upload ")])],1)],1)],1)},P=[],j=(o(7658),{name:"UploadFile",props:["showUploadDialog","bucketName"],data:()=>({uploadFiles:[],fileLinks:[],uploadFilesProgress:[]}),methods:{CloseUploadFileDialog(){this.uploadFiles=void 0,this.$emit("CloseUploadDialog")},HandleFileChanged(){this.$http.post("http://localhost:8080/api/file/upload",{bucketName:this.bucketName,fileName:this.uploadFiles.map((e=>e.name))}).then((e=>{e.data.map((e=>this.fileLinks.push({fileName:e["fileName"],url:e["url"]}))),console.log(this.fileLinks.map((e=>e.fileName)))}))},async HandleFileUpload(){await this.fileLinks.forEach((e=>{let t=new FormData;this.uploadFiles.forEach((o=>{e["fileName"]==o["name"]&&t.append("data",o)})),this.uploadFilesProgress.push({fileName:e["fileName"],bucketName:this.bucketName,uploaded:0}),this.$http.put(e["url"],t,{uploadProgress:t=>{this.uploadFilesProgress.forEach((o=>{o["fileName"]==e["fileName"]&&(o["uploaded"]=Math.round(100*t.loaded/t.total),console.log(o["fileName"],o["uploaded"]))}))}}).then((()=>{console.log("File",e["fileName"],"is uploaded"),this.uploadFilesProgress.splice(this.uploadFilesProgress.indexOf(e["fileName"]),1),this.$root.$emit("CheckFilesUpdates")}))})),this.uploadDialog=!1,this.uploadFiles=void 0,console.log("test",this.uploadFilesProgress),this.$emit("CloseUploadDialog")}}}),O=j,S=(0,$.Z)(O,B,P,!1,null,null,null),M=S.exports,G={data:()=>({showCreateDialog:!1,showUploadDialog:!1,bucketName:""}),methods:{RemoveBucket(){this.$http.post("http://localhost:8080/api/bucket/remove",{bucketName:this.bucketName}).then((e=>{this.$root.$emit("UpdateBucketList")}),(e=>{console.log("err:",e)}))}},mounted(){this.$root.$on("ChangeCurrentBucket",(e=>this.bucketName=e))},components:{CreateBucket:y,UploadFile:M}},R=G,T=(0,$.Z)(R,m,k,!1,null,null,null),E=T.exports,I=o(9223),H=o(5808),V=o(4525),z=o(1289),A=o(4611),q=o(8515),J=o(7423),K=function(){var e=this,t=e._self._c;return t(q.Z,{attrs:{app:"",color:"blue-grey darken-4"},model:{value:e.drawer,callback:function(t){e.drawer=t},expression:"drawer"}},[t(J.Z,{staticClass:"pa-4",attrs:{color:"blue-grey darken-4"}},[t(c.Z,{staticClass:"mb-4",attrs:{size:"64",color:"blue lighten-2"}},[e._v("LS")])],1),t(I.Z),t(H.Z,[0!=e.bucketList.length?t(V.Z,[e._v("Доступные расчёты")]):t(V.Z,[e._v("Здесь пока нет расчётов")]),t(I.Z,{staticClass:"my-2"}),e._l(e.bucketList,(function(o){return t(V.Z,{attrs:{link:""}},[t(A.Z,[t(d.Z,[e._v("mdi-calculator")])],1),t(z.km,{on:{click:function(t){return e.$root.$emit("ChangeCurrentBucket",o)}}},[t(z.V9,[e._v(e._s(o))])],1)],1)}))],2)],1)},Q=[],W={name:"LeftNav",data:()=>({bucketList:[],bucketName:"",drawer:null}),methods:{GetBucketList(){this.$http.get("http://localhost:8080/api/bucket/list").then((e=>{this.bucketList=e.data,this.bucketName=this.bucketList[0],this.$root.$emit("ChangeCurrentBucket",this.bucketName)}))}},created(){this.GetBucketList()},mounted(){this.$root.$on("UpdateBucketList",(()=>this.GetBucketList()))}},X=W,Y=(0,$.Z)(X,K,Q,!1,null,null,null),ee=Y.exports,te=o(7941),oe=function(){var e=this,t=e._self._c;return t(v.Z,[t(J.Z,{attrs:{"min-height":"70vh",rounded:"lg",elevation:"4"}},[t("br"),0==e.files.length?t("h2",{staticClass:"text-center"},[e._v("Для данного расчёта нет данных")]):e._e(),t(b.Z,{staticClass:"mx-auto px-1",attrs:{flat:"",tile:""}},[t(H.Z,[t(te.Z,{attrs:{color:"primary"},model:{value:e.selectedItem,callback:function(t){e.selectedItem=t},expression:"selectedItem"}},e._l(e.files,(function(o,l){return t(V.Z,{key:l},[t(z.km,{on:{click:function(t){e.currentFile=o.name,e.GetFileInfo()}}},[t(C.Z,[t(v.Z,{attrs:{cols:"11"}},[t(z.V9,{domProps:{textContent:e._s(o.name)}})],1),t(v.Z,{staticClass:"text-right"},[t(u.Z,{attrs:{icon:"",color:"light-blue darken-2"}},[t(d.Z,[e._v("mdi-download")])],1),t(u.Z,{attrs:{icon:"",color:"red darken-4"},on:{click:function(t){return e.RemoveFile(o.name)}}},[t(d.Z,[e._v("mdi-delete-forever")])],1)],1)],1)],1)],1)})),1)],1)],1)],1)],1)},le=[],ae={name:"MainSheet",data:()=>({bucketName:"",currentFile:"",files:[],selectedItem:null}),methods:{RemoveFile:async function(e){await this.$http.get("http://localhost:8080/api/file/remove",{params:{fileName:e,bucketName:this.bucketName}}).then((e=>{this.files=e.data})),this.GetFileList()},GetFileInfo(){console.log(this.files.find((e=>e.name==this.currentFile)))},GetFileList(){this.$http.get("http://localhost:8080/api/file/list",{params:{bucketName:this.bucketName}}).then((e=>{this.files=e.data,console.log(this.files)}),(e=>{this.files=e.data,console.log(e)}))}},mounted(){this.$root.$on("ChangeCurrentBucket",(e=>{this.bucketName=e,this.GetFileList()})),this.$root.$on("CheckFilesUpdates",(()=>{this.GetFileList()}))}},ie=ae,ne=(0,$.Z)(ie,oe,le,!1,null,null,null),se=ne.exports,re=function(){var e=this,t=e._self._c;return t(q.Z,{attrs:{clipped:"",app:"",right:""}},[t(J.Z)],1)},ce=[],ue={},he=(0,$.Z)(ue,re,ce,!1,null,null,null),de=he.exports,pe={name:"App",data:()=>({}),components:{TopNav:E,LeftNav:ee,MainSheet:se,Rightbar:de}},fe=pe,me=(0,$.Z)(fe,n,s,!1,null,null,null),ke=me.exports,be=o(8345),ge=function(){var e=this,t=e._self._c;return t(h.Z,[t(C.Z,[t("LeftNav"),t("MainSheet")],1)],1)},ve=[],Ze={name:"MainView",components:{LeftNav:ee,MainSheet:se}},Ce=Ze,_e=(0,$.Z)(Ce,ge,ve,!1,null,null,null),Ne=_e.exports;l.ZP.use(be.ZP);const we=[{path:"/",name:"home",component:Ne}],xe=new be.ZP({mode:"history",base:"/",routes:we});var Fe=xe,Le=o(8864);l.ZP.use(Le.Z);var $e=new Le.Z({theme:{dark:!0}}),De=o(4104);l.ZP.config.productionTip=!1,l.ZP.use(De.ZP),new l.ZP({router:Fe,vuetify:$e,VueResource:De.ZP,render:e=>e(ke)}).$mount("#app")},6608:function(){}},t={};function o(l){var a=t[l];if(void 0!==a)return a.exports;var i=t[l]={exports:{}};return e[l](i,i.exports,o),i.exports}o.m=e,function(){var e=[];o.O=function(t,l,a,i){if(!l){var n=1/0;for(u=0;u<e.length;u++){l=e[u][0],a=e[u][1],i=e[u][2];for(var s=!0,r=0;r<l.length;r++)(!1&i||n>=i)&&Object.keys(o.O).every((function(e){return o.O[e](l[r])}))?l.splice(r--,1):(s=!1,i<n&&(n=i));if(s){e.splice(u--,1);var c=a();void 0!==c&&(t=c)}}return t}i=i||0;for(var u=e.length;u>0&&e[u-1][2]>i;u--)e[u]=e[u-1];e[u]=[l,a,i]}}(),function(){o.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return o.d(t,{a:t}),t}}(),function(){o.d=function(e,t){for(var l in t)o.o(t,l)&&!o.o(e,l)&&Object.defineProperty(e,l,{enumerable:!0,get:t[l]})}}(),function(){o.g=function(){if("object"===typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"===typeof window)return window}}()}(),function(){o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)}}(),function(){o.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})}}(),function(){var e={143:0};o.O.j=function(t){return 0===e[t]};var t=function(t,l){var a,i,n=l[0],s=l[1],r=l[2],c=0;if(n.some((function(t){return 0!==e[t]}))){for(a in s)o.o(s,a)&&(o.m[a]=s[a]);if(r)var u=r(o)}for(t&&t(l);c<n.length;c++)i=n[c],o.o(e,i)&&e[i]&&e[i][0](),e[i]=0;return o.O(u)},l=self["webpackChunkfront"]=self["webpackChunkfront"]||[];l.forEach(t.bind(null,0)),l.push=t.bind(null,l.push.bind(l))}();var l=o.O(void 0,[998],(function(){return o(6850)}));l=o.O(l)})();
//# sourceMappingURL=app.4dd02808.js.map